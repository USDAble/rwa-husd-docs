# åŒºå—é“¾åŸºç¡€æ¦‚å¿µ

**å­¦ä¹ é˜¶æ®µ**: é˜¶æ®µä¸€ | **éš¾åº¦**: â­â­â˜†â˜†â˜† | **é¢„ä¼°æ—¶é—´**: 15-20å°æ—¶

---

## ğŸ“š å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬ç« å­¦ä¹ åï¼Œæ‚¨å°†èƒ½å¤Ÿï¼š
- ç†è§£åŒºå—é“¾çš„æ ¸å¿ƒæ¦‚å¿µå’Œå·¥ä½œåŸç†
- æŒæ¡åˆ†å¸ƒå¼ç³»ç»Ÿçš„åŸºæœ¬çŸ¥è¯†
- äº†è§£å¯†ç å­¦åœ¨åŒºå—é“¾ä¸­çš„åº”ç”¨
- åŒºåˆ†ä¸åŒç±»å‹çš„å…±è¯†æœºåˆ¶

---

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

### 1. ä»€ä¹ˆæ˜¯åŒºå—é“¾ï¼Ÿ

åŒºå—é“¾æ˜¯ä¸€ç§**åˆ†å¸ƒå¼è´¦æœ¬æŠ€æœ¯**ï¼Œé€šè¿‡å¯†ç å­¦æ–¹æ³•å°†æ•°æ®å—æŒ‰æ—¶é—´é¡ºåºé“¾æ¥ï¼Œå½¢æˆä¸å¯ç¯¡æ”¹çš„æ•°æ®é“¾æ¡ã€‚

#### æ ¸å¿ƒç‰¹å¾
- **å»ä¸­å¿ƒåŒ–**: æ²¡æœ‰å•ä¸€æ§åˆ¶ç‚¹
- **ä¸å¯ç¯¡æ”¹**: å†å²æ•°æ®æ— æ³•ä¿®æ”¹
- **é€æ˜æ€§**: æ‰€æœ‰äº¤æ˜“å…¬å¼€å¯éªŒè¯
- **å…±è¯†æœºåˆ¶**: ç½‘ç»œå‚ä¸è€…è¾¾æˆä¸€è‡´

#### åŸºæœ¬ç»“æ„
```
åŒºå—é“¾ = åŒºå—1 â†’ åŒºå—2 â†’ åŒºå—3 â†’ ... â†’ åŒºå—N

æ¯ä¸ªåŒºå—åŒ…å«:
â”œâ”€â”€ åŒºå—å¤´ (Block Header)
â”‚   â”œâ”€â”€ å‰ä¸€åŒºå—å“ˆå¸Œ
â”‚   â”œâ”€â”€ é»˜å…‹å°”æ ¹
â”‚   â”œâ”€â”€ æ—¶é—´æˆ³
â”‚   â””â”€â”€ éšæœºæ•° (Nonce)
â””â”€â”€ äº¤æ˜“æ•°æ® (Transaction Data)
    â”œâ”€â”€ äº¤æ˜“1
    â”œâ”€â”€ äº¤æ˜“2
    â””â”€â”€ ...
```

### 2. åˆ†å¸ƒå¼ç³»ç»ŸåŸºç¡€

#### 2.1 CAPå®šç†

åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä»¥ä¸‹ä¸‰ä¸ªç‰¹æ€§æ— æ³•åŒæ—¶æ»¡è¶³ï¼š

- **ä¸€è‡´æ€§ (Consistency)**: æ‰€æœ‰èŠ‚ç‚¹åŒæ—¶çœ‹åˆ°ç›¸åŒæ•°æ®
- **å¯ç”¨æ€§ (Availability)**: ç³»ç»ŸæŒç»­å¯ç”¨
- **åˆ†åŒºå®¹é”™æ€§ (Partition Tolerance)**: ç½‘ç»œåˆ†åŒºæ—¶ç³»ç»Ÿä»èƒ½å·¥ä½œ

```mermaid
graph TB
    A[CAPå®šç†] --> B[ä¸€è‡´æ€§ C]
    A --> C[å¯ç”¨æ€§ A]  
    A --> D[åˆ†åŒºå®¹é”™æ€§ P]
    
    B --> E[CPç³»ç»Ÿ<br/>ç‰ºç‰²å¯ç”¨æ€§]
    C --> F[APç³»ç»Ÿ<br/>ç‰ºç‰²ä¸€è‡´æ€§]
    D --> G[CAç³»ç»Ÿ<br/>ç‰ºç‰²åˆ†åŒºå®¹é”™æ€§]
```

#### 2.2 æ‹œå åº­å°†å†›é—®é¢˜

åœ¨å­˜åœ¨æ¶æ„èŠ‚ç‚¹çš„åˆ†å¸ƒå¼ç½‘ç»œä¸­ï¼Œå¦‚ä½•è¾¾æˆå…±è¯†ï¼Ÿ

**é—®é¢˜æè¿°**:
- å¤šä¸ªå°†å†›å›´æ”»åŸå¸‚
- åªèƒ½é€šè¿‡ä¿¡ä½¿ä¼ é€’æ¶ˆæ¯
- éƒ¨åˆ†å°†å†›å¯èƒ½æ˜¯å›å¾’
- éœ€è¦è¾¾æˆä¸€è‡´çš„æ”»å‡»è®¡åˆ’

**è§£å†³æ–¹æ¡ˆ**:
- éœ€è¦è¶…è¿‡2/3çš„è¯šå®èŠ‚ç‚¹
- ä½¿ç”¨æ•°å­—ç­¾åéªŒè¯æ¶ˆæ¯
- å¤šè½®æŠ•ç¥¨è¾¾æˆå…±è¯†

### 3. å¯†ç å­¦åŸºç¡€

#### 3.1 å“ˆå¸Œå‡½æ•°

**ç‰¹æ€§**:
- **ç¡®å®šæ€§**: ç›¸åŒè¾“å…¥äº§ç”Ÿç›¸åŒè¾“å‡º
- **å¿«é€Ÿè®¡ç®—**: è®¡ç®—æ•ˆç‡é«˜
- **é›ªå´©æ•ˆåº”**: è¾“å…¥å¾®å°å˜åŒ–å¯¼è‡´è¾“å‡ºå·¨å¤§å˜åŒ–
- **ä¸å¯é€†**: æ— æ³•ä»è¾“å‡ºæ¨å¯¼è¾“å…¥
- **æŠ—ç¢°æ’**: éš¾ä»¥æ‰¾åˆ°ä¸¤ä¸ªä¸åŒè¾“å…¥äº§ç”Ÿç›¸åŒè¾“å‡º

**å¸¸ç”¨å“ˆå¸Œç®—æ³•**:
```bash
# SHA-256ç¤ºä¾‹
echo "Hello Blockchain" | sha256sum
# è¾“å‡º: 7d865e959b2466918c9863afca942d0fb89d7c9ac0c99bafc3749504ded97730

# å¾®å°å˜åŒ–çš„å½±å“
echo "Hello blockchain" | sha256sum  
# è¾“å‡º: 4ae7c3b6ac0beff671efa8cf57386151c06e58ca53a78d83f36107316cec125f
```

#### 3.2 æ•°å­—ç­¾å

**å·¥ä½œåŸç†**:
1. ä½¿ç”¨ç§é’¥å¯¹æ¶ˆæ¯è¿›è¡Œç­¾å
2. å…¶ä»–äººä½¿ç”¨å…¬é’¥éªŒè¯ç­¾å
3. ç¡®ä¿æ¶ˆæ¯æ¥æºå’Œå®Œæ•´æ€§

```python
# æ•°å­—ç­¾åç¤ºä¾‹ (æ¦‚å¿µæ€§ä»£ç )
def digital_signature_example():
    # 1. ç”Ÿæˆå¯†é’¥å¯¹
    private_key, public_key = generate_keypair()
    
    # 2. åˆ›å»ºæ¶ˆæ¯
    message = "Transfer 10 tokens to Alice"
    
    # 3. ä½¿ç”¨ç§é’¥ç­¾å
    signature = sign(message, private_key)
    
    # 4. ä½¿ç”¨å…¬é’¥éªŒè¯
    is_valid = verify(message, signature, public_key)
    
    return is_valid  # True if signature is valid
```

#### 3.3 é»˜å…‹å°”æ ‘ (Merkle Tree)

ç”¨äºé«˜æ•ˆéªŒè¯å¤§é‡æ•°æ®çš„å®Œæ•´æ€§ï¼š

```
        Root Hash
       /          \
   Hash AB      Hash CD
   /    \       /     \
Hash A Hash B Hash C Hash D
  |     |       |      |
 Tx A  Tx B    Tx C   Tx D
```

**ä¼˜åŠ¿**:
- åªéœ€è¦æ ¹å“ˆå¸Œå°±èƒ½éªŒè¯æ•´ä¸ªæ•°æ®é›†
- å¯ä»¥é«˜æ•ˆéªŒè¯å•ä¸ªäº¤æ˜“çš„å­˜åœ¨æ€§
- æ”¯æŒå¢é‡æ›´æ–°

### 4. å…±è¯†æœºåˆ¶æ¦‚è¿°

#### 4.1 å·¥ä½œé‡è¯æ˜ (Proof of Work, PoW)

**åŸç†**:
- çŸ¿å·¥ç«äº‰è§£å†³æ•°å­¦éš¾é¢˜
- ç¬¬ä¸€ä¸ªè§£å†³çš„çŸ¿å·¥è·å¾—è®°è´¦æƒ
- å…¶ä»–èŠ‚ç‚¹éªŒè¯å¹¶æ¥å—æ–°åŒºå—

**ç‰¹ç‚¹**:
- âœ… å®‰å…¨æ€§é«˜ï¼Œç»è¿‡å®æˆ˜éªŒè¯
- âœ… å®Œå…¨å»ä¸­å¿ƒåŒ–
- âŒ èƒ½è€—å·¨å¤§
- âŒ äº¤æ˜“ç¡®è®¤æ—¶é—´é•¿

**åº”ç”¨**: Bitcoin, Ethereum (å†å²)

#### 4.2 æƒç›Šè¯æ˜ (Proof of Stake, PoS)

**åŸç†**:
- éªŒè¯è€…è´¨æŠ¼ä»£å¸è·å¾—è®°è´¦æƒ
- è®°è´¦æƒæ¦‚ç‡ä¸è´¨æŠ¼æ•°é‡æˆæ­£æ¯”
- æ¶æ„è¡Œä¸ºä¼šè¢«æƒ©ç½šï¼ˆå‰Šå‡è´¨æŠ¼ï¼‰

**ç‰¹ç‚¹**:
- âœ… èƒ½è€—ä½
- âœ… äº¤æ˜“ç¡®è®¤å¿«
- âœ… æ”¯æŒé“¾ä¸Šæ²»ç†
- âŒ å¯èƒ½å­˜åœ¨"å¯Œè€…æ„ˆå¯Œ"é—®é¢˜

**åº”ç”¨**: Ethereum 2.0, Cosmos, Polkadot

#### 4.3 å§”æ‰˜æƒç›Šè¯æ˜ (Delegated Proof of Stake, DPoS)

**åŸç†**:
- ä»£å¸æŒæœ‰è€…æŠ•ç¥¨é€‰æ‹©éªŒè¯è€…
- éªŒè¯è€…è½®æµäº§ç”ŸåŒºå—
- æé«˜äº†äº¤æ˜“å¤„ç†é€Ÿåº¦

**ç‰¹ç‚¹**:
- âœ… é«˜æ€§èƒ½ (é«˜TPS)
- âœ… èƒ½è€—ä½
- âœ… æ²»ç†æ•ˆç‡é«˜
- âŒ ç›¸å¯¹ä¸­å¿ƒåŒ–

**åº”ç”¨**: EOS, Tron

#### 4.4 å®ç”¨æ‹œå åº­å®¹é”™ (Practical Byzantine Fault Tolerance, pBFT)

**åŸç†**:
- ä¸‰é˜¶æ®µåè®®ï¼šé¢„å‡†å¤‡ã€å‡†å¤‡ã€æäº¤
- éœ€è¦è¶…è¿‡2/3èŠ‚ç‚¹è¯šå®
- æä¾›å³æ—¶æœ€ç»ˆæ€§

**ç‰¹ç‚¹**:
- âœ… å³æ—¶æœ€ç»ˆæ€§
- âœ… é«˜å®‰å…¨æ€§
- âœ… é€‚åˆè®¸å¯ç½‘ç»œ
- âŒ æ‰©å±•æ€§æœ‰é™

**åº”ç”¨**: Hyperledger Fabric, Tendermint

---

## ğŸ” æ·±å…¥ç†è§£ï¼šåŒºå—é“¾ç±»å‹

### å…¬æœ‰é“¾ (Public Blockchain)

**ç‰¹å¾**:
- å®Œå…¨å¼€æ”¾ï¼Œä»»ä½•äººå¯å‚ä¸
- é«˜åº¦å»ä¸­å¿ƒåŒ–
- é€æ˜åº¦æœ€é«˜

**ä¼˜åŠ¿**:
- æŠ—å®¡æŸ¥æ€§å¼º
- ç½‘ç»œæ•ˆåº”å¤§
- åˆ›æ–°æ´»è·ƒ

**æŒ‘æˆ˜**:
- æ€§èƒ½ç›¸å¯¹è¾ƒä½
- æ²»ç†å¤æ‚
- èƒ½è€—å¯èƒ½è¾ƒé«˜

**å…¸å‹åº”ç”¨**: Bitcoin, Ethereum

### è”ç›Ÿé“¾ (Consortium Blockchain)

**ç‰¹å¾**:
- åŠå¼€æ”¾ç½‘ç»œ
- ç”±è”ç›Ÿæˆå‘˜å…±åŒç»´æŠ¤
- éƒ¨åˆ†å»ä¸­å¿ƒåŒ–

**ä¼˜åŠ¿**:
- æ€§èƒ½è¾ƒé«˜
- æ²»ç†ç›¸å¯¹ç®€å•
- åˆè§„æ€§å¥½

**æŒ‘æˆ˜**:
- ä¸­å¿ƒåŒ–ç¨‹åº¦è¾ƒé«˜
- å‡†å…¥é—¨æ§›å­˜åœ¨
- åˆ›æ–°ç›¸å¯¹ä¿å®ˆ

**å…¸å‹åº”ç”¨**: é“¶è¡Œé—´æ¸…ç®—, ä¾›åº”é“¾é‡‘è

### ç§æœ‰é“¾ (Private Blockchain)

**ç‰¹å¾**:
- å°é—­ç½‘ç»œ
- å•ä¸€ç»„ç»‡æ§åˆ¶
- ä¸­å¿ƒåŒ–ç¨‹åº¦æœ€é«˜

**ä¼˜åŠ¿**:
- æ€§èƒ½æœ€é«˜
- éšç§ä¿æŠ¤å¥½
- å®Œå…¨å¯æ§

**æŒ‘æˆ˜**:
- å»ä¸­å¿ƒåŒ–ç¨‹åº¦ä½
- ä¿¡ä»»æˆæœ¬é«˜
- ç½‘ç»œæ•ˆåº”æœ‰é™

**å…¸å‹åº”ç”¨**: ä¼ä¸šå†…éƒ¨ç³»ç»Ÿ, æ”¿åºœåº”ç”¨

---

## ğŸ’¡ å®è·µç»ƒä¹ 

### ç»ƒä¹ 1: å“ˆå¸Œå‡½æ•°å®éªŒ

```bash
# 1. å®‰è£…å¿…è¦å·¥å…·
# macOS: brew install coreutils
# Ubuntu: sudo apt-get install coreutils

# 2. ä½“éªŒå“ˆå¸Œå‡½æ•°ç‰¹æ€§
echo "Blockchain" | sha256sum
echo "blockchain" | sha256sum  # æ³¨æ„å¤§å°å†™å·®å¼‚
echo "Blockchain " | sha256sum  # æ³¨æ„ç©ºæ ¼å½±å“

# 3. éªŒè¯é›ªå´©æ•ˆåº”
echo "Hello World" | sha256sum
echo "Hello World!" | sha256sum
```

### ç»ƒä¹ 2: ç®€å•åŒºå—é“¾æ¨¡æ‹Ÿ

```python
import hashlib
import json
from datetime import datetime

class Block:
    def __init__(self, index, transactions, timestamp, previous_hash):
        self.index = index
        self.transactions = transactions
        self.timestamp = timestamp
        self.previous_hash = previous_hash
        self.hash = self.calculate_hash()
    
    def calculate_hash(self):
        block_string = json.dumps({
            "index": self.index,
            "transactions": self.transactions,
            "timestamp": str(self.timestamp),
            "previous_hash": self.previous_hash
        }, sort_keys=True)
        return hashlib.sha256(block_string.encode()).hexdigest()

class SimpleBlockchain:
    def __init__(self):
        self.chain = [self.create_genesis_block()]
    
    def create_genesis_block(self):
        return Block(0, [], datetime.now(), "0")
    
    def get_latest_block(self):
        return self.chain[-1]
    
    def add_block(self, transactions):
        previous_block = self.get_latest_block()
        new_block = Block(
            previous_block.index + 1,
            transactions,
            datetime.now(),
            previous_block.hash
        )
        self.chain.append(new_block)
    
    def is_chain_valid(self):
        for i in range(1, len(self.chain)):
            current_block = self.chain[i]
            previous_block = self.chain[i-1]
            
            if current_block.hash != current_block.calculate_hash():
                return False
            
            if current_block.previous_hash != previous_block.hash:
                return False
        
        return True

# ä½¿ç”¨ç¤ºä¾‹
blockchain = SimpleBlockchain()
blockchain.add_block(["Alice -> Bob: 10 tokens"])
blockchain.add_block(["Bob -> Charlie: 5 tokens"])

print(f"åŒºå—é“¾æ˜¯å¦æœ‰æ•ˆ: {blockchain.is_chain_valid()}")
for block in blockchain.chain:
    print(f"åŒºå— {block.index}: {block.hash[:16]}...")
```

### ç»ƒä¹ 3: å…±è¯†æœºåˆ¶å¯¹æ¯”åˆ†æ

åˆ›å»ºä¸€ä¸ªè¡¨æ ¼ï¼Œå¯¹æ¯”ä¸åŒå…±è¯†æœºåˆ¶ï¼š

| ç‰¹æ€§ | PoW | PoS | DPoS | pBFT |
|------|-----|-----|------|------|
| èƒ½è€— | é«˜ | ä½ | ä½ | ä½ |
| TPS | ä½ | ä¸­ | é«˜ | é«˜ |
| æœ€ç»ˆæ€§ | æ¦‚ç‡æ€§ | æ¦‚ç‡æ€§ | æ¦‚ç‡æ€§ | å³æ—¶ |
| å»ä¸­å¿ƒåŒ–ç¨‹åº¦ | é«˜ | ä¸­ | ä¸­ | ä½ |
| é€‚ç”¨åœºæ™¯ | å…¬æœ‰é“¾ | å…¬æœ‰é“¾ | å…¬æœ‰é“¾ | è”ç›Ÿé“¾ |

---

## ğŸ“– æ‰©å±•é˜…è¯»

### å¿…è¯»èµ„æ–™
1. **ã€Šç²¾é€šæ¯”ç‰¹å¸ã€‹** - Andreas M. Antonopoulos
2. **ã€ŠåŒºå—é“¾æŠ€æœ¯æŒ‡å—ã€‹** - é‚¹å‡ç­‰
3. **Bitcoinç™½çš®ä¹¦** - Satoshi Nakamoto
4. **Ethereumé»„çš®ä¹¦** - Gavin Wood

### åœ¨çº¿èµ„æº
- [Bitcoin.org](https://bitcoin.org/) - æ¯”ç‰¹å¸å®˜æ–¹èµ„æº
- [Ethereum.org](https://ethereum.org/) - ä»¥å¤ªåŠå­¦ä¹ èµ„æº
- [CourseraåŒºå—é“¾è¯¾ç¨‹](https://www.coursera.org/specializations/blockchain)
- [MITåŒºå—é“¾è¯¾ç¨‹](https://ocw.mit.edu/courses/sloan-school-of-management/)

### æŠ€æœ¯è®ºæ–‡
- [Bitcoin: A Peer-to-Peer Electronic Cash System](https://bitcoin.org/bitcoin.pdf)
- [Ethereum: A Next-Generation Smart Contract and Decentralized Application Platform](https://ethereum.org/en/whitepaper/)
- [The Byzantine Generals Problem](https://lamport.azurewebsites.net/pubs/byz.pdf)

---

## âœ… å­¦ä¹ æ£€æŸ¥ç‚¹

å®Œæˆæœ¬ç« å­¦ä¹ åï¼Œè¯·ç¡®è®¤æ‚¨èƒ½å¤Ÿï¼š

- [ ] è§£é‡ŠåŒºå—é“¾çš„åŸºæœ¬å·¥ä½œåŸç†
- [ ] æè¿°åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„CAPå®šç†
- [ ] ç†è§£æ‹œå åº­å°†å†›é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆ
- [ ] åŒºåˆ†ä¸åŒç±»å‹çš„å“ˆå¸Œå‡½æ•°å’Œæ•°å­—ç­¾å
- [ ] å¯¹æ¯”å„ç§å…±è¯†æœºåˆ¶çš„ä¼˜ç¼ºç‚¹
- [ ] å®ç°ç®€å•çš„åŒºå—é“¾æ•°æ®ç»“æ„
- [ ] åˆ†æä¸åŒç±»å‹åŒºå—é“¾çš„é€‚ç”¨åœºæ™¯

### è‡ªæµ‹é¢˜ç›®

1. ä¸ºä»€ä¹ˆåŒºå—é“¾è¢«ç§°ä¸º"ä¸å¯ç¯¡æ”¹"çš„ï¼Ÿ
2. CAPå®šç†ä¸­ï¼ŒåŒºå—é“¾é€šå¸¸é€‰æ‹©å“ªä¸¤ä¸ªç‰¹æ€§ï¼Ÿ
3. PoWå’ŒPoSçš„ä¸»è¦åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ
4. é»˜å…‹å°”æ ‘åœ¨åŒºå—é“¾ä¸­çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ
5. ä»€ä¹ˆæƒ…å†µä¸‹ä¼šé€‰æ‹©è”ç›Ÿé“¾è€Œä¸æ˜¯å…¬æœ‰é“¾ï¼Ÿ

---

**ä¸‹ä¸€ç« **: [å…¬é“¾æ¶æ„è®¾è®¡](./02-Blockchain-Architecture.md)

*ç»§ç»­æ·±å…¥å­¦ä¹ åŒºå—é“¾æŠ€æœ¯çš„æ¶æ„è®¾è®¡åŸç†ï¼*
