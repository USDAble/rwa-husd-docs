# Tokeny T-REX ä¸šåŠ¡æµç¨‹ä¸æŠ€æœ¯å®ç°æ·±åº¦è§£æ

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0
**åˆ›å»ºæ—¶é—´**: 2025-10-13 11:35:00 CST
**æ–‡æ¡£ç±»å‹**: ä¸šåŠ¡æµç¨‹å¯¼å‘çš„æŠ€æœ¯æ·±åº¦è§£æ
**æ ‡å‡†**: ERC3643ï¼ˆå®‰å…¨ä»£å¸æ ‡å‡†ï¼‰
**ä¿¡æ¯æ¥æº**: Tokeny å®˜æ–¹æ–‡æ¡£ (https://docs.tokeny.com/)

---

## ğŸ“‘ ç›®å½•

1. [Tokeny T-REX æ¦‚è¿°](#1-tokeny-t-rexæ¦‚è¿°)
2. [ä¸šåŠ¡æµç¨‹ 1: ä»£å¸éƒ¨ç½²ä¸é…ç½®](#2-ä¸šåŠ¡æµç¨‹1-ä»£å¸éƒ¨ç½²ä¸é…ç½®)
3. [ä¸šåŠ¡æµç¨‹ 2: æŠ•èµ„è€…èº«ä»½éªŒè¯(KYC)](#3-ä¸šåŠ¡æµç¨‹2-æŠ•èµ„è€…èº«ä»½éªŒè¯kyc)
4. [ä¸šåŠ¡æµç¨‹ 3: ä»£å¸å‘è¡Œä¸è½¬è´¦](#4-ä¸šåŠ¡æµç¨‹3-ä»£å¸å‘è¡Œä¸è½¬è´¦)
5. [ä¸šåŠ¡æµç¨‹ 4: åˆè§„æ£€æŸ¥ä¸é™åˆ¶](#5-ä¸šåŠ¡æµç¨‹4-åˆè§„æ£€æŸ¥ä¸é™åˆ¶)
6. [ä¸šåŠ¡æµç¨‹ 5: ä»£å¸èµå›ä¸é”€æ¯](#6-ä¸šåŠ¡æµç¨‹5-ä»£å¸èµå›ä¸é”€æ¯)
7. [å®Œæ•´ä¸šåŠ¡æµç¨‹å›¾](#7-å®Œæ•´ä¸šåŠ¡æµç¨‹å›¾)
8. [ERC3643 æ ‡å‡†è¯¦è§£](#8-erc3643æ ‡å‡†è¯¦è§£)
9. [å…³é”®åˆè§„è§„åˆ™](#9-å…³é”®åˆè§„è§„åˆ™)
10. [ç½‘ç»œä¿¡æ¯](#10-ç½‘ç»œä¿¡æ¯)
11. [æ€»ç»“ä¸æœ€ä½³å®è·µ](#11-æ€»ç»“ä¸æœ€ä½³å®è·µ)

---

## 1. Tokeny T-REX æ¦‚è¿°

### 1.1 æ ¸å¿ƒå®šä½

**Tokeny T-REX æ˜¯ä¸€ä¸ªåŸºäº ERC3643 æ ‡å‡†çš„å®‰å…¨ä»£å¸(Security Token)å‘è¡Œå¹³å°**,ä¸ºèµ„äº§å‘è¡Œè€…æä¾›å®Œæ•´çš„åˆè§„ä»£å¸åŒ–è§£å†³æ–¹æ¡ˆ,æ”¯æŒå…¨çƒç›‘ç®¡è¦æ±‚ã€‚

**æ ¸å¿ƒä»·å€¼ä¸»å¼ **:

-   **ERC3643 æ ‡å‡†**: é¦–ä¸ªä¸“ä¸ºå®‰å…¨ä»£å¸è®¾è®¡çš„ä»¥å¤ªåŠæ ‡å‡†
-   **æ¨¡å—åŒ–åˆè§„**: å¯æ’æ‹”çš„åˆè§„è§„åˆ™æ¨¡å—,é€‚åº”ä¸åŒç›‘ç®¡è¦æ±‚
-   **èº«ä»½ç®¡ç†**: é“¾ä¸Šèº«ä»½éªŒè¯å’Œ KYC ç®¡ç†
-   **å…¨çƒéƒ¨ç½²**: æ”¯æŒå¤šä¸ª EVM å…¼å®¹é“¾

---

### 1.2 ERC3643 æ¶æ„

Tokeny T-REX é‡‡ç”¨**ERC3643 æ ‡å‡†æ¶æ„**:

-   **T-REX Token**: ERC3643 ä»£å¸åˆçº¦
-   **Identity Registry**: èº«ä»½æ³¨å†Œè¡¨
-   **Claim Topics Registry**: å£°æ˜ä¸»é¢˜æ³¨å†Œè¡¨
-   **Trusted Issuers Registry**: å¯ä¿¡å‘è¡Œè€…æ³¨å†Œè¡¨
-   **Modular Compliance**: æ¨¡å—åŒ–åˆè§„ç³»ç»Ÿ

**æ ¸å¿ƒåˆçº¦**:

-   Token, IdentityRegistry, ClaimTopicsRegistry, TrustedIssuersRegistry, ModularCompliance

---

## 2. ä¸šåŠ¡æµç¨‹ 1: ä»£å¸éƒ¨ç½²ä¸é…ç½®

### 2.1 æµç¨‹æ¦‚è¿°

ä»£å¸éƒ¨ç½²æ˜¯ Tokeny T-REX ä¸šåŠ¡æµç¨‹çš„èµ·ç‚¹,ç”±èµ„äº§å‘è¡Œè€…(Issuer)å‘èµ·,é€šè¿‡ TokenFactory åˆçº¦éƒ¨ç½²ä¸€ä¸ªæ–°çš„ ERC3643 ä»£å¸ã€‚

**æ¶‰åŠçš„åˆçº¦**: TokenFactory, Token, IdentityRegistry, ModularCompliance

**æ ¸å¿ƒæ­¥éª¤**:

1. å‘è¡Œè€…è°ƒç”¨ TokenFactory.deployToken()éƒ¨ç½²ä»£å¸
2. TokenFactory éƒ¨ç½² Token åˆçº¦
3. TokenFactory éƒ¨ç½² IdentityRegistry åˆçº¦
4. TokenFactory éƒ¨ç½² ModularCompliance åˆçº¦
5. é…ç½®ä»£å¸å‚æ•°(åç§°ã€ç¬¦å·ã€æ€»ä¾›åº”é‡)

---

### 2.2 è¯¦ç»†æµç¨‹å›¾

```mermaid
sequenceDiagram
    participant Issuer as èµ„äº§å‘è¡Œè€…
    participant Factory as TokenFactoryåˆçº¦
    participant Token as Tokenåˆçº¦
    participant IR as IdentityRegistryåˆçº¦
    participant MC as ModularComplianceåˆçº¦

    Issuer->>Factory: 1. deployToken(name, symbol, decimals)
    Factory->>Token: 2. éƒ¨ç½²Tokenåˆçº¦
    Token-->>Factory: 3. è¿”å›Tokenåœ°å€
    Factory->>IR: 4. éƒ¨ç½²IdentityRegistryåˆçº¦
    IR-->>Factory: 5. è¿”å›IRåœ°å€
    Factory->>MC: 6. éƒ¨ç½²ModularComplianceåˆçº¦
    MC-->>Factory: 7. è¿”å›MCåœ°å€
    Factory->>Token: 8. setIdentityRegistry(IR)
    Factory->>Token: 9. setCompliance(MC)
    Factory-->>Issuer: 10. è¿”å›éƒ¨ç½²æˆåŠŸ
```

---

### 2.3 TokenFactory åˆçº¦è¯¦è§£

**èŒè´£**: ä»£å¸å·¥å‚åˆçº¦,ç”¨äºéƒ¨ç½² ERC3643 ä»£å¸

**æ ¸å¿ƒæ–¹æ³•**:

```solidity
/**
 * @dev éƒ¨ç½²æ–°ä»£å¸
 * @param name ä»£å¸åç§°
 * @param symbol ä»£å¸ç¬¦å·
 * @param decimals å°æ•°ä½æ•°
 * @param onchainID å‘è¡Œè€…é“¾ä¸Šèº«ä»½ID
 */
function deployToken(
    string memory name,
    string memory symbol,
    uint8 decimals,
    address onchainID
) external returns (address tokenAddress) {
    // 1. éƒ¨ç½²Tokenåˆçº¦
    Token token = new Token(name, symbol, decimals, onchainID);

    // 2. éƒ¨ç½²IdentityRegistryåˆçº¦
    IdentityRegistry ir = new IdentityRegistry(
        address(trustedIssuersRegistry),
        address(claimTopicsRegistry),
        address(identityStorage)
    );

    // 3. éƒ¨ç½²ModularComplianceåˆçº¦
    ModularCompliance mc = new ModularCompliance();

    // 4. é…ç½®Token
    token.setIdentityRegistry(address(ir));
    token.setCompliance(address(mc));

    // 5. è½¬ç§»æ‰€æœ‰æƒç»™å‘è¡Œè€…
    token.transferOwnership(msg.sender);
    ir.transferOwnership(msg.sender);
    mc.transferOwnership(msg.sender);

    // 6. è§¦å‘äº‹ä»¶
    emit TokenDeployed(address(token), msg.sender);

    return address(token);
}
```

---

### 2.4 ä»£ç ç¤ºä¾‹

#### 2.4.1 éƒ¨ç½²ä»£å¸(TypeScript)

```typescript
async function deploySecurityToken(
    factoryContract: ethers.Contract,
    tokenConfig: {
        name: string;
        symbol: string;
        decimals: number;
        onchainID: string;
    }
) {
    try {
        // 1. éƒ¨ç½²ä»£å¸
        console.log("Deploying security token...");
        const tx = await factoryContract.deployToken(
            tokenConfig.name,
            tokenConfig.symbol,
            tokenConfig.decimals,
            tokenConfig.onchainID
        );

        const receipt = await tx.wait();
        console.log("âœ… Token deployed");

        // 2. è·å–ä»£å¸åœ°å€
        const event = receipt.events.find((e) => e.event === "TokenDeployed");
        const tokenAddress = event.args.tokenAddress;

        return {
            tokenAddress,
            name: tokenConfig.name,
            symbol: tokenConfig.symbol,
            status: "deployed",
        };
    } catch (error) {
        console.error("Error deploying token:", error);
        throw error;
    }
}
```

---

## 3. ä¸šåŠ¡æµç¨‹ 2: æŠ•èµ„è€…èº«ä»½éªŒè¯(KYC)

### 3.1 æµç¨‹æ¦‚è¿°

æŠ•èµ„è€…èº«ä»½éªŒè¯æ˜¯ Tokeny T-REX çš„æ ¸å¿ƒåŠŸèƒ½,é€šè¿‡é“¾ä¸Šèº«ä»½(ONCHAINID)å’Œå£°æ˜(Claims)å®ç° KYC éªŒè¯ã€‚

**æ¶‰åŠçš„åˆçº¦**: IdentityRegistry, ClaimIssuer, ONCHAINID

**æ ¸å¿ƒæ­¥éª¤**:

1. æŠ•èµ„è€…åˆ›å»º ONCHAINID(é“¾ä¸Šèº«ä»½)
2. KYC æä¾›å•†éªŒè¯æŠ•èµ„è€…èº«ä»½
3. KYC æä¾›å•†ç­¾å‘å£°æ˜(Claim)åˆ°æŠ•èµ„è€…çš„ ONCHAINID
4. å‘è¡Œè€…å°†æŠ•èµ„è€…æ·»åŠ åˆ° IdentityRegistry
5. æŠ•èµ„è€…è·å¾—ä»£å¸è½¬è´¦æƒé™

---

### 3.2 è¯¦ç»†æµç¨‹å›¾

```mermaid
sequenceDiagram
    participant Investor as æŠ•èµ„è€…
    participant ONCHAINID as ONCHAINIDåˆçº¦
    participant KYC as KYCæä¾›å•†
    participant ClaimIssuer as ClaimIssueråˆçº¦
    participant IR as IdentityRegistryåˆçº¦
    participant Issuer as èµ„äº§å‘è¡Œè€…

    Investor->>ONCHAINID: 1. åˆ›å»ºONCHAINID
    ONCHAINID-->>Investor: 2. è¿”å›èº«ä»½ID
    Investor->>KYC: 3. æäº¤KYCèµ„æ–™
    KYC->>KYC: 4. éªŒè¯èº«ä»½
    KYC->>ClaimIssuer: 5. ç­¾å‘å£°æ˜(Claim)
    ClaimIssuer->>ONCHAINID: 6. æ·»åŠ å£°æ˜åˆ°ONCHAINID
    ONCHAINID-->>Investor: 7. è¿”å›å£°æ˜æ·»åŠ æˆåŠŸ
    Issuer->>IR: 8. registerIdentity(investor, onchainID)
    IR-->>Issuer: 9. è¿”å›æ³¨å†ŒæˆåŠŸ
    Investor-->>Investor: 10. è·å¾—ä»£å¸è½¬è´¦æƒé™
```

---

### 3.3 IdentityRegistry åˆçº¦è¯¦è§£

**èŒè´£**: èº«ä»½æ³¨å†Œè¡¨,ç®¡ç†æŠ•èµ„è€…èº«ä»½å’ŒéªŒè¯çŠ¶æ€

**æ•°æ®ç»“æ„**:

```solidity
struct Identity {
    address onchainID;
    uint16 country;
    bool verified;
}

// æŠ•èµ„è€…åœ°å€ => èº«ä»½ä¿¡æ¯
mapping(address => Identity) public identities;

// å›½å®¶ä»£ç  => æŠ•èµ„è€…æ•°é‡
mapping(uint16 => uint256) public investorCountByCountry;
```

**æ ¸å¿ƒæ–¹æ³•**:

```solidity
/**
 * @dev æ³¨å†ŒæŠ•èµ„è€…èº«ä»½
 * @param investor æŠ•èµ„è€…åœ°å€
 * @param onchainID é“¾ä¸Šèº«ä»½åœ°å€
 * @param country å›½å®¶ä»£ç 
 */
function registerIdentity(
    address investor,
    address onchainID,
    uint16 country
) external onlyAgent {
    require(identities[investor].onchainID == address(0), "Already registered");

    // 1. éªŒè¯ONCHAINIDæœ‰æ•ˆæ€§
    require(_isValidIdentity(onchainID), "Invalid identity");

    // 2. æ³¨å†Œèº«ä»½
    identities[investor] = Identity({
        onchainID: onchainID,
        country: country,
        verified: true
    });

    // 3. æ›´æ–°ç»Ÿè®¡
    investorCountByCountry[country]++;

    // 4. è§¦å‘äº‹ä»¶
    emit IdentityRegistered(investor, onchainID);
}
```

---

### 3.3 ä»£ç ç¤ºä¾‹

#### 3.3.1 æŠ•èµ„è€… KYC ä¸èº«ä»½æ³¨å†Œ(TypeScript)

```typescript
import { ethers } from "ethers";

/**
 * æŠ•èµ„è€…KYCä¸èº«ä»½æ³¨å†Œå®Œæ•´æµç¨‹
 */
async function registerInvestorWithKYC(
    registryContract: ethers.Contract,
    investorData: {
        wallet: string;
        onchainID: string; // ONCHAINIDåœ°å€
        country: number; // ISO 3166-1 country code
        claims: Array<{
            topic: number; // Claim topic (e.g., 1 = KYC)
            issuer: string; // Trusted issuer address
            signature: string; // Claim signature
            data: string; // Claim data
        }>;
    }
) {
    try {
        console.log("ğŸ” å¼€å§‹æŠ•èµ„è€…KYCä¸èº«ä»½æ³¨å†Œ...");
        console.log("æŠ•èµ„è€…é’±åŒ…:", investorData.wallet);
        console.log("ONCHAINID:", investorData.onchainID);

        // 1. éªŒè¯ONCHAINID
        console.log("\næ­¥éª¤1: éªŒè¯ONCHAINID...");
        const identityContract = new ethers.Contract(
            investorData.onchainID,
            ONCHAINID_ABI,
            provider
        );
        const owner = await identityContract.owner();

        if (owner.toLowerCase() !== investorData.wallet.toLowerCase()) {
            throw new Error("ONCHAINIDæ‰€æœ‰è€…ä¸æŠ•èµ„è€…é’±åŒ…ä¸åŒ¹é…");
        }
        console.log("âœ… ONCHAINIDéªŒè¯é€šè¿‡");

        // 2. æ·»åŠ Claimsåˆ°ONCHAINID
        console.log("\næ­¥éª¤2: æ·»åŠ Claimsåˆ°ONCHAINID...");
        for (const claim of investorData.claims) {
            console.log(`  æ·»åŠ Claim: Topic ${claim.topic}`);

            const tx = await identityContract.addClaim(
                claim.topic,
                1, // scheme (ECDSA)
                claim.issuer,
                claim.signature,
                claim.data,
                ""
            );

            await tx.wait();
            console.log(`  âœ… Claim ${claim.topic} æ·»åŠ æˆåŠŸ`);
        }

        // 3. æ³¨å†ŒæŠ•èµ„è€…åˆ°IdentityRegistry
        console.log("\næ­¥éª¤3: æ³¨å†ŒæŠ•èµ„è€…åˆ°IdentityRegistry...");
        const tx = await registryContract.registerInvestor(
            investorData.wallet,
            investorData.onchainID,
            investorData.country
        );

        console.log("äº¤æ˜“å“ˆå¸Œ:", tx.hash);
        const receipt = await tx.wait();
        console.log("âœ… æŠ•èµ„è€…æ³¨å†ŒæˆåŠŸ!");

        // 4. éªŒè¯æ³¨å†Œç»“æœ
        console.log("\næ­¥éª¤4: éªŒè¯æ³¨å†Œç»“æœ...");
        const isVerified = await registryContract.isVerified(investorData.wallet);
        const registeredIdentity = await registryContract.identity(investorData.wallet);
        const investorCountry = await registryContract.investorCountry(investorData.wallet);

        console.log("\nğŸ“Š æ³¨å†Œç»“æœ:");
        console.log("éªŒè¯çŠ¶æ€:", isVerified);
        console.log("ONCHAINID:", registeredIdentity);
        console.log("å›½å®¶ä»£ç :", investorCountry);

        return {
            wallet: investorData.wallet,
            onchainID: investorData.onchainID,
            verified: isVerified,
            country: investorCountry,
            registrationTime: new Date().toISOString(),
        };
    } catch (error) {
        console.error("âŒ æŠ•èµ„è€…æ³¨å†Œå¤±è´¥:", error);
        throw error;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
async function main() {
    const provider = new ethers.providers.JsonRpcProvider("https://mainnet.infura.io/v3/YOUR_KEY");
    const wallet = new ethers.Wallet("YOUR_PRIVATE_KEY", provider);
    const registryContract = new ethers.Contract(
        IDENTITY_REGISTRY_ADDRESS,
        IdentityRegistryABI,
        wallet
    );

    const result = await registerInvestorWithKYC(registryContract, {
        wallet: "0x1234567890123456789012345678901234567890",
        onchainID: "0xABCDEF1234567890ABCDEF1234567890ABCDEF12",
        country: 840, // ç¾å›½
        claims: [
            {
                topic: 1, // KYC Claim
                issuer: "0xTRUSTED_ISSUER_ADDRESS",
                signature: "0xSIGNATURE_DATA",
                data: "0xCLAIM_DATA",
            },
        ],
    });

    console.log("\nğŸ‰ æŠ•èµ„è€…KYCä¸èº«ä»½æ³¨å†Œå®Œæˆ!");
    console.log("éªŒè¯çŠ¶æ€:", result.verified);
}
```

---

## 4. ä¸šåŠ¡æµç¨‹ 3: ä»£å¸å‘è¡Œä¸è½¬è´¦

### 4.1 æµç¨‹æ¦‚è¿°

ä»£å¸å‘è¡Œä¸è½¬è´¦æ˜¯ Tokeny T-REX çš„æ ¸å¿ƒä¸šåŠ¡æµç¨‹,æ‰€æœ‰è½¬è´¦éƒ½éœ€è¦é€šè¿‡åˆè§„æ£€æŸ¥ã€‚

**æ¶‰åŠçš„åˆçº¦**: Token, ModularCompliance, IdentityRegistry

**æ ¸å¿ƒæ­¥éª¤**:

1. å‘è¡Œè€…è°ƒç”¨ Token.mint()é“¸é€ ä»£å¸
2. æŠ•èµ„è€…è°ƒç”¨ Token.transfer()è½¬è´¦ä»£å¸
3. Token åˆçº¦è°ƒç”¨ ModularCompliance.canTransfer()æ£€æŸ¥åˆè§„
4. åˆè§„æ£€æŸ¥é€šè¿‡åæ‰§è¡Œè½¬è´¦

---

### 4.2 Token åˆçº¦è¯¦è§£

**æ ¸å¿ƒæ–¹æ³•**:

```solidity
/**
 * @dev è½¬è´¦ä»£å¸(å¸¦åˆè§„æ£€æŸ¥)
 * @param to æ¥æ”¶è€…åœ°å€
 * @param amount è½¬è´¦é‡‘é¢
 */
function transfer(address to, uint256 amount) public override returns (bool) {
    // 1. åˆè§„æ£€æŸ¥
    require(compliance.canTransfer(msg.sender, to, amount), "Transfer not compliant");

    // 2. èº«ä»½éªŒè¯
    require(identityRegistry.isVerified(msg.sender), "Sender not verified");
    require(identityRegistry.isVerified(to), "Receiver not verified");

    // 3. æ‰§è¡Œè½¬è´¦
    _transfer(msg.sender, to, amount);

    // 4. æ›´æ–°åˆè§„çŠ¶æ€
    compliance.transferred(msg.sender, to, amount);

    return true;
}
```

---

## 5. ä¸šåŠ¡æµç¨‹ 4: åˆè§„æ£€æŸ¥ä¸é™åˆ¶

### 5.1 æµç¨‹æ¦‚è¿°

åˆè§„æ£€æŸ¥æ˜¯ Tokeny T-REX çš„æ ¸å¿ƒç‰¹æ€§,é€šè¿‡æ¨¡å—åŒ–åˆè§„ç³»ç»Ÿå®ç°çµæ´»çš„åˆè§„è§„åˆ™ã€‚

**æ¶‰åŠçš„åˆçº¦**: ModularCompliance, ComplianceModule

**å¸¸è§åˆè§„è§„åˆ™**:

-   å›½å®¶é™åˆ¶(CountryRestrictionModule)
-   æŠ•èµ„è€…æ•°é‡é™åˆ¶(MaxInvestorsModule)
-   æŒä»“é™åˆ¶(MaxBalanceModule)
-   è½¬è´¦é™åˆ¶(TransferLimitModule)

---

### 5.2 ModularCompliance åˆçº¦è¯¦è§£

**æ ¸å¿ƒæ–¹æ³•**:

```solidity
/**
 * @dev æ£€æŸ¥è½¬è´¦æ˜¯å¦åˆè§„
 * @param from å‘é€è€…åœ°å€
 * @param to æ¥æ”¶è€…åœ°å€
 * @param amount è½¬è´¦é‡‘é¢
 */
function canTransfer(
    address from,
    address to,
    uint256 amount
) external view returns (bool) {
    // éå†æ‰€æœ‰åˆè§„æ¨¡å—
    for (uint i = 0; i < modules.length; i++) {
        if (!modules[i].moduleCheck(from, to, amount, address(this))) {
            return false;
        }
    }
    return true;
}
```

---

## 6. ä¸šåŠ¡æµç¨‹ 5: ä»£å¸èµå›ä¸é”€æ¯

### 6.1 æµç¨‹æ¦‚è¿°

ä»£å¸èµå›ä¸é”€æ¯æ˜¯æŠ•èµ„è€…é€€å‡ºçš„æµç¨‹ã€‚

**æ ¸å¿ƒæ­¥éª¤**:

1. æŠ•èµ„è€…æäº¤èµå›è¯·æ±‚
2. å‘è¡Œè€…æ‰¹å‡†èµå›
3. å‘è¡Œè€…è°ƒç”¨ Token.burn()é”€æ¯ä»£å¸
4. å‘è¡Œè€…å‘æŠ•èµ„è€…æ”¯ä»˜å¯¹åº”èµ„äº§

---

## 7. å®Œæ•´ä¸šåŠ¡æµç¨‹å›¾

```mermaid
graph TB
    Start[å¼€å§‹] --> Deploy[1. éƒ¨ç½²ä»£å¸]
    Deploy --> KYC[2. KYCéªŒè¯]
    KYC --> Mint[3. é“¸é€ ä»£å¸]
    Mint --> Transfer[4. è½¬è´¦ä»£å¸]
    Transfer --> Compliance[5. åˆè§„æ£€æŸ¥]
    Compliance --> Burn[6. é”€æ¯ä»£å¸]
    Burn --> End[ç»“æŸ]

    style Deploy fill:#4CAF50
    style KYC fill:#2196F3
    style Compliance fill:#FF9800
    style Burn fill:#9C27B0
```

---

## 8. ERC3643 æ ‡å‡†è¯¦è§£

### 8.1 æ ¸å¿ƒæ¥å£

```solidity
interface IERC3643 {
    // èº«ä»½éªŒè¯
    function identityRegistry() external view returns (address);

    // åˆè§„æ£€æŸ¥
    function compliance() external view returns (address);

    // è½¬è´¦(å¸¦åˆè§„æ£€æŸ¥)
    function transfer(address to, uint256 amount) external returns (bool);

    // å¼ºåˆ¶è½¬è´¦(ä»…ä»£ç†)
    function forcedTransfer(address from, address to, uint256 amount) external;

    // å†»ç»“/è§£å†»
    function freeze(address account) external;
    function unfreeze(address account) external;
}
```

---

## 9. å…³é”®åˆè§„è§„åˆ™

### 9.1 å›½å®¶é™åˆ¶

```solidity
// ç¦æ­¢ç‰¹å®šå›½å®¶çš„æŠ•èµ„è€…
function addCountryRestriction(uint16 country) external;
```

### 9.2 æŠ•èµ„è€…æ•°é‡é™åˆ¶

```solidity
// é™åˆ¶æœ€å¤§æŠ•èµ„è€…æ•°é‡
function setMaxInvestors(uint256 max) external;
```

### 9.3 æŒä»“é™åˆ¶

```solidity
// é™åˆ¶å•ä¸ªæŠ•èµ„è€…æœ€å¤§æŒä»“
function setMaxBalance(uint256 max) external;
```

---

## 10. ç½‘ç»œä¿¡æ¯

### 10.1 æ”¯æŒçš„ç½‘ç»œ

-   **Ethereum Mainnet**: Chain ID 1
-   **Polygon**: Chain ID 137
-   **Avalanche C-Chain**: Chain ID 43114
-   **BSC**: Chain ID 56

---

## 11. æ€»ç»“ä¸æœ€ä½³å®è·µ

### 11.1 æ ¸å¿ƒç‰¹ç‚¹

1. **ERC3643 æ ‡å‡†**: ä¸“ä¸ºå®‰å…¨ä»£å¸è®¾è®¡
2. **æ¨¡å—åŒ–åˆè§„**: çµæ´»çš„åˆè§„è§„åˆ™
3. **é“¾ä¸Šèº«ä»½**: ONCHAINID èº«ä»½ç®¡ç†
4. **å…¨çƒéƒ¨ç½²**: æ”¯æŒå¤šé“¾

### 11.2 å¼€å‘æœ€ä½³å®è·µ

1. **ä»£å¸éƒ¨ç½²**: ä½¿ç”¨ TokenFactory ç»Ÿä¸€éƒ¨ç½²
2. **KYC ç®¡ç†**: ä½¿ç”¨å¯ä¿¡çš„ KYC æä¾›å•†
3. **åˆè§„é…ç½®**: æ ¹æ®ç›‘ç®¡è¦æ±‚é…ç½®åˆè§„æ¨¡å—
4. **Gas ä¼˜åŒ–**: ä½¿ç”¨æ‰¹é‡æ“ä½œå‡å°‘ Gas æˆæœ¬

### 11.3 å¸¸è§é—®é¢˜ FAQ

**Q: ERC3643 ä¸ ERC20 çš„åŒºåˆ«?**
A: ERC3643 åœ¨ ERC20 åŸºç¡€ä¸Šå¢åŠ äº†èº«ä»½éªŒè¯å’Œåˆè§„æ£€æŸ¥ã€‚

**Q: å¦‚ä½•æ·»åŠ æ–°çš„åˆè§„è§„åˆ™?**
A: å¼€å‘æ–°çš„ ComplianceModule å¹¶æ·»åŠ åˆ° ModularComplianceã€‚

**Q: ä»£å¸å¯ä»¥åœ¨ DEX äº¤æ˜“å—?**
A: å¯ä»¥,ä½†éœ€è¦ DEX æ”¯æŒ ERC3643 æ ‡å‡†ã€‚

---

## ğŸ“š å‚è€ƒèµ„æº

-   **å®˜æ–¹æ–‡æ¡£**: https://docs.tokeny.com/
-   **GitHub**: https://github.com/TokenySolutions/T-REX
-   **ERC3643 æ ‡å‡†**: https://eips.ethereum.org/EIPS/eip-3643

---

**æ–‡æ¡£ç»“æŸ**
