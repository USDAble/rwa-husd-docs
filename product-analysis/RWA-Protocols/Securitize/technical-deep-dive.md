# Securitize ä¸šåŠ¡æµç¨‹ä¸æŠ€æœ¯å®ç°æ·±åº¦è§£æ

**æ–‡æ¡£ç‰ˆæœ¬**: v2.0
**åˆ›å»ºæ—¶é—´**: 2025-10-13 12:00:00 CST
**æ–‡æ¡£ç±»å‹**: ä¸šåŠ¡æµç¨‹å¯¼å‘çš„æŠ€æœ¯æ·±åº¦è§£æ
**å®šä½**: æœºæ„çº§æ•°å­—è¯åˆ¸å¹³å°
**ä¿¡æ¯æ¥æº**: Securitize å®˜æ–¹æ–‡æ¡£ (https://securitize.io/)

---

## ğŸ“‘ ç›®å½•

1. [Securitize æ¦‚è¿°](#1-securitizeæ¦‚è¿°)
2. [ä¸šåŠ¡æµç¨‹ 1: è¯åˆ¸ä»£å¸å‘è¡Œ](#2-ä¸šåŠ¡æµç¨‹1-è¯åˆ¸ä»£å¸å‘è¡Œ)
3. [ä¸šåŠ¡æµç¨‹ 2: æŠ•èµ„è€…æ³¨å†Œä¸ KYC](#3-ä¸šåŠ¡æµç¨‹2-æŠ•èµ„è€…æ³¨å†Œä¸kyc)
4. [ä¸šåŠ¡æµç¨‹ 3: ä»£å¸è´­ä¹°ä¸è½¬è´¦](#4-ä¸šåŠ¡æµç¨‹3-ä»£å¸è´­ä¹°ä¸è½¬è´¦)
5. [ä¸šåŠ¡æµç¨‹ 4: åˆ†çº¢ä¸å…¬å¸è¡ŒåŠ¨](#5-ä¸šåŠ¡æµç¨‹4-åˆ†çº¢ä¸å…¬å¸è¡ŒåŠ¨)
6. [ä¸šåŠ¡æµç¨‹ 5: äºŒçº§å¸‚åœºäº¤æ˜“](#6-ä¸šåŠ¡æµç¨‹5-äºŒçº§å¸‚åœºäº¤æ˜“)
7. [å®Œæ•´ä¸šåŠ¡æµç¨‹å›¾](#7-å®Œæ•´ä¸šåŠ¡æµç¨‹å›¾)
8. [DS Protocol è¯¦è§£](#8-ds-protocolè¯¦è§£)
9. [SEC åˆè§„æ¶æ„](#9-secåˆè§„æ¶æ„)
10. [ç½‘ç»œä¿¡æ¯](#10-ç½‘ç»œä¿¡æ¯)
11. [æ€»ç»“ä¸æœ€ä½³å®è·µ](#11-æ€»ç»“ä¸æœ€ä½³å®è·µ)

---

## 1. Securitize æ¦‚è¿°

### 1.1 æ ¸å¿ƒå®šä½

**Securitize æ˜¯ä¸€ä¸ªæœºæ„çº§æ•°å­—è¯åˆ¸(Digital Securities)å‘è¡Œå’Œç®¡ç†å¹³å°**,ä¸ºä¼ ç»Ÿèµ„äº§çš„ä»£å¸åŒ–æä¾›ç«¯åˆ°ç«¯çš„è§£å†³æ–¹æ¡ˆ,ç¬¦åˆ SEC ç­‰å…¨çƒç›‘ç®¡è¦æ±‚ã€‚

**æ ¸å¿ƒä»·å€¼ä¸»å¼ **:

-   **æœºæ„çº§å¹³å°**: æœåŠ¡äºæˆ¿åœ°äº§ã€ç§å‹Ÿè‚¡æƒã€è‰ºæœ¯å“ç­‰ä¼ ç»Ÿèµ„äº§çš„ä»£å¸åŒ–
-   **å…¨é¢åˆè§„**: ç¬¦åˆ SEC Reg Dã€Reg Sã€Reg A+ç­‰ç›‘ç®¡è¦æ±‚
-   **DS Protocol**: è‡ªç ”çš„æ•°å­—è¯åˆ¸åè®®,æ”¯æŒå¤æ‚çš„å…¬å¸è¡ŒåŠ¨
-   **è½¬è®©ä»£ç†æœåŠ¡**: æä¾›å®Œæ•´çš„è‚¡ä¸œåå†Œå’Œåˆè§„æŠ¥å‘ŠæœåŠ¡

---

### 1.2 DS Protocol æ¶æ„

Securitize é‡‡ç”¨**DS Protocol(Digital Securities Protocol)**æ¶æ„:

-   **DS Registry**: æŠ•èµ„è€…æ³¨å†Œè¡¨
-   **DS Token**: æ•°å­—è¯åˆ¸ä»£å¸åˆçº¦
-   **DS Service**: æœåŠ¡åˆçº¦(åˆ†çº¢ã€èµå›ç­‰)
-   **DS Compliance**: åˆè§„åˆçº¦(SEC è§„åˆ™ã€è½¬è´¦é™åˆ¶)

**æ ¸å¿ƒåˆçº¦**:

-   DSRegistry, DSToken, DSService, DSCompliance, TransferAgent

---

## 2. ä¸šåŠ¡æµç¨‹ 1: è¯åˆ¸ä»£å¸å‘è¡Œ

### 2.1 æµç¨‹æ¦‚è¿°

è¯åˆ¸ä»£å¸å‘è¡Œæ˜¯ Securitize ä¸šåŠ¡æµç¨‹çš„èµ·ç‚¹,ç”±èµ„äº§å‘è¡Œè€…(Issuer)å‘èµ·,é€šè¿‡ DS Protocol éƒ¨ç½²ä¸€ä¸ªæ–°çš„æ•°å­—è¯åˆ¸ä»£å¸ã€‚

**æ¶‰åŠçš„åˆçº¦**: DSTokenFactory, DSToken, DSRegistry, DSCompliance

**æ ¸å¿ƒæ­¥éª¤**:

1. å‘è¡Œè€…æäº¤å‘è¡Œç”³è¯·(åŒ…å«èµ„äº§ä¿¡æ¯ã€å‘è¡Œè§„æ¨¡ã€åˆè§„è¦æ±‚)
2. Securitize å®¡æ ¸å‘è¡Œç”³è¯·
3. éƒ¨ç½² DSToken åˆçº¦
4. é…ç½®åˆè§„è§„åˆ™(Reg D/S/A+)
5. å¼€å¯è®¤è´­

---

### 2.2 è¯¦ç»†æµç¨‹å›¾

```mermaid
sequenceDiagram
    participant Issuer as èµ„äº§å‘è¡Œè€…
    participant Platform as Securitizeå¹³å°
    participant Factory as DSTokenFactoryåˆçº¦
    participant Token as DSTokenåˆçº¦
    participant Registry as DSRegistryåˆçº¦
    participant Compliance as DSComplianceåˆçº¦

    Issuer->>Platform: 1. æäº¤å‘è¡Œç”³è¯·
    Platform->>Platform: 2. å®¡æ ¸ç”³è¯·
    Platform->>Factory: 3. deployToken(params)
    Factory->>Token: 4. éƒ¨ç½²DSTokenåˆçº¦
    Token-->>Factory: 5. è¿”å›Tokenåœ°å€
    Factory->>Registry: 6. éƒ¨ç½²DSRegistryåˆçº¦
    Registry-->>Factory: 7. è¿”å›Registryåœ°å€
    Factory->>Compliance: 8. éƒ¨ç½²DSComplianceåˆçº¦
    Compliance-->>Factory: 9. è¿”å›Complianceåœ°å€
    Factory->>Token: 10. é…ç½®åˆçº¦å…³è”
    Factory-->>Platform: 11. è¿”å›éƒ¨ç½²æˆåŠŸ
    Platform-->>Issuer: 12. å‘è¡ŒæˆåŠŸé€šçŸ¥
```

---

### 2.3 DSTokenFactory åˆçº¦è¯¦è§£

**èŒè´£**: æ•°å­—è¯åˆ¸ä»£å¸å·¥å‚åˆçº¦,ç”¨äºéƒ¨ç½² DS Protocol ä»£å¸

**æ ¸å¿ƒæ–¹æ³•**:

```solidity
/**
 * @dev éƒ¨ç½²æ•°å­—è¯åˆ¸ä»£å¸
 * @param name è¯åˆ¸åç§°
 * @param symbol è¯åˆ¸ç¬¦å·
 * @param totalSupply æ€»ä¾›åº”é‡
 * @param regType ç›‘ç®¡ç±»å‹(RegD/RegS/RegA)
 */
function deployToken(
    string memory name,
    string memory symbol,
    uint256 totalSupply,
    RegulationType regType
) external onlyAdmin returns (address tokenAddress) {
    // 1. éƒ¨ç½²DSTokenåˆçº¦
    DSToken token = new DSToken(name, symbol, totalSupply);

    // 2. éƒ¨ç½²DSRegistryåˆçº¦
    DSRegistry registry = new DSRegistry();

    // 3. éƒ¨ç½²DSComplianceåˆçº¦
    DSCompliance compliance = new DSCompliance(regType);

    // 4. é…ç½®åˆçº¦å…³è”
    token.setRegistry(address(registry));
    token.setCompliance(address(compliance));

    // 5. è½¬ç§»æ‰€æœ‰æƒç»™å‘è¡Œè€…
    token.transferOwnership(msg.sender);
    registry.transferOwnership(msg.sender);
    compliance.transferOwnership(msg.sender);

    // 6. è§¦å‘äº‹ä»¶
    emit TokenDeployed(address(token), msg.sender, regType);

    return address(token);
}
```

---

### 2.4 ä»£ç ç¤ºä¾‹

#### 2.4.1 å‘è¡Œæ•°å­—è¯åˆ¸(TypeScript)

```typescript
import { ethers } from "ethers";

/**
 * å‘è¡Œæ•°å­—è¯åˆ¸å®Œæ•´æµç¨‹
 * @param factoryContract DSTokenFactoryåˆçº¦å®ä¾‹
 * @param securityConfig è¯åˆ¸é…ç½®å‚æ•°
 * @returns éƒ¨ç½²ç»“æœ
 */
async function issueDigitalSecurity(
    factoryContract: ethers.Contract,
    securityConfig: {
        name: string;
        symbol: string;
        totalSupply: bigint;
        regType: "RegD" | "RegS" | "RegA";
        lockupPeriod: number; // é”å®šæœŸ(å¤©)
        minInvestment: bigint; // æœ€å°æŠ•èµ„é¢
        maxInvestors: number; // æœ€å¤§æŠ•èµ„è€…æ•°é‡
    }
) {
    try {
        console.log("ğŸš€ å¼€å§‹å‘è¡Œæ•°å­—è¯åˆ¸...");
        console.log("è¯åˆ¸åç§°:", securityConfig.name);
        console.log("è¯åˆ¸ç¬¦å·:", securityConfig.symbol);
        console.log("æ€»ä¾›åº”é‡:", securityConfig.totalSupply.toString());
        console.log("ç›‘ç®¡ç±»å‹:", securityConfig.regType);

        // 1. éƒ¨ç½²æ•°å­—è¯åˆ¸åˆçº¦
        console.log("\næ­¥éª¤1: éƒ¨ç½²DSTokenåˆçº¦...");
        const tx = await factoryContract.deployToken(
            securityConfig.name,
            securityConfig.symbol,
            securityConfig.totalSupply,
            securityConfig.regType
        );

        console.log("äº¤æ˜“å“ˆå¸Œ:", tx.hash);
        const receipt = await tx.wait();
        console.log("âœ… åˆçº¦éƒ¨ç½²æˆåŠŸ!");

        // 2. è·å–éƒ¨ç½²çš„åˆçº¦åœ°å€
        const event = receipt.events.find((e) => e.event === "TokenDeployed");
        if (!event) {
            throw new Error("TokenDeployedäº‹ä»¶æœªæ‰¾åˆ°");
        }

        const tokenAddress = event.args.tokenAddress;
        const registryAddress = event.args.registryAddress;
        const complianceAddress = event.args.complianceAddress;

        console.log("\nğŸ“‹ éƒ¨ç½²çš„åˆçº¦åœ°å€:");
        console.log("DSToken:", tokenAddress);
        console.log("DSRegistry:", registryAddress);
        console.log("DSCompliance:", complianceAddress);

        // 3. é…ç½®é”å®šæœŸ
        console.log("\næ­¥éª¤2: é…ç½®é”å®šæœŸ...");
        const tokenContract = new ethers.Contract(tokenAddress, DSTokenABI, signer);
        const lockupSeconds = securityConfig.lockupPeriod * 86400;
        const tx2 = await tokenContract.setLockupPeriod(lockupSeconds);
        await tx2.wait();
        console.log("âœ… é”å®šæœŸè®¾ç½®ä¸º", securityConfig.lockupPeriod, "å¤©");

        // 4. é…ç½®æŠ•èµ„é™åˆ¶
        console.log("\næ­¥éª¤3: é…ç½®æŠ•èµ„é™åˆ¶...");
        const complianceContract = new ethers.Contract(complianceAddress, DSComplianceABI, signer);
        const tx3 = await complianceContract.setInvestmentLimits(
            securityConfig.minInvestment,
            securityConfig.maxInvestors
        );
        await tx3.wait();
        console.log(
            "âœ… æœ€å°æŠ•èµ„é¢:",
            ethers.utils.formatEther(securityConfig.minInvestment),
            "ETH"
        );
        console.log("âœ… æœ€å¤§æŠ•èµ„è€…æ•°é‡:", securityConfig.maxInvestors);

        // 5. éªŒè¯éƒ¨ç½²
        console.log("\næ­¥éª¤4: éªŒè¯éƒ¨ç½²...");
        const name = await tokenContract.name();
        const symbol = await tokenContract.symbol();
        const totalSupply = await tokenContract.totalSupply();
        const lockupPeriod = await tokenContract.lockupPeriod();

        console.log("\nğŸ“Š éªŒè¯ç»“æœ:");
        console.log("åç§°:", name);
        console.log("ç¬¦å·:", symbol);
        console.log("æ€»ä¾›åº”é‡:", totalSupply.toString());
        console.log("é”å®šæœŸ:", lockupPeriod.toNumber() / 86400, "å¤©");

        return {
            tokenAddress,
            registryAddress,
            complianceAddress,
            name: securityConfig.name,
            symbol: securityConfig.symbol,
            totalSupply: securityConfig.totalSupply,
            regType: securityConfig.regType,
            status: "deployed",
            deploymentTime: new Date().toISOString(),
        };
    } catch (error) {
        console.error("âŒ å‘è¡Œæ•°å­—è¯åˆ¸å¤±è´¥:", error);
        throw error;
    }
}

// ä½¿ç”¨ç¤ºä¾‹
async function main() {
    const provider = new ethers.providers.JsonRpcProvider("https://mainnet.infura.io/v3/YOUR_KEY");
    const wallet = new ethers.Wallet("YOUR_PRIVATE_KEY", provider);
    const factoryContract = new ethers.Contract(FACTORY_ADDRESS, DSTokenFactoryABI, wallet);

    const result = await issueDigitalSecurity(factoryContract, {
        name: "Real Estate Token A",
        symbol: "RETA",
        totalSupply: ethers.utils.parseEther("1000000"), // 100ä¸‡ä»£å¸
        regType: "RegD",
        lockupPeriod: 365, // 1å¹´é”å®šæœŸ
        minInvestment: ethers.utils.parseEther("10000"), // æœ€å°æŠ•èµ„1ä¸‡ç¾å…ƒ
        maxInvestors: 99, // æœ€å¤š99ä¸ªæŠ•èµ„è€…
    });

    console.log("\nğŸ‰ æ•°å­—è¯åˆ¸å‘è¡Œå®Œæˆ!");
    console.log("ä»£å¸åœ°å€:", result.tokenAddress);
}
```

---

## 3. ä¸šåŠ¡æµç¨‹ 2: æŠ•èµ„è€…æ³¨å†Œä¸ KYC

### 3.1 æµç¨‹æ¦‚è¿°

æŠ•èµ„è€…æ³¨å†Œä¸ KYC æ˜¯ Securitize çš„æ ¸å¿ƒåŠŸèƒ½,ç¡®ä¿æ‰€æœ‰æŠ•èµ„è€…ç¬¦åˆ SEC çš„åˆæ ¼æŠ•èµ„è€…(Accredited Investor)è¦æ±‚ã€‚

**æ¶‰åŠçš„åˆçº¦**: DSRegistry, KYCProvider

**æ ¸å¿ƒæ­¥éª¤**:

1. æŠ•èµ„è€…æäº¤æ³¨å†Œç”³è¯·
2. æäº¤ KYC/AML èµ„æ–™
3. ç¬¬ä¸‰æ–¹ KYC æä¾›å•†éªŒè¯èº«ä»½
4. Securitize å®¡æ ¸æŠ•èµ„è€…èµ„æ ¼(åˆæ ¼æŠ•èµ„è€…è®¤è¯)
5. å°†æŠ•èµ„è€…æ·»åŠ åˆ° DSRegistry
6. æŠ•èµ„è€…è·å¾—è´­ä¹°æƒé™

---

### 3.2 è¯¦ç»†æµç¨‹å›¾

```mermaid
sequenceDiagram
    participant Investor as æŠ•èµ„è€…
    participant Platform as Securitizeå¹³å°
    participant KYC as KYCæä¾›å•†
    participant Registry as DSRegistryåˆçº¦
    participant Compliance as DSComplianceåˆçº¦

    Investor->>Platform: 1. æäº¤æ³¨å†Œç”³è¯·
    Investor->>Platform: 2. æäº¤KYC/AMLèµ„æ–™
    Platform->>KYC: 3. è¯·æ±‚èº«ä»½éªŒè¯
    KYC->>KYC: 4. éªŒè¯èº«ä»½
    KYC-->>Platform: 5. è¿”å›éªŒè¯ç»“æœ
    Platform->>Platform: 6. å®¡æ ¸æŠ•èµ„è€…èµ„æ ¼
    Platform->>Registry: 7. addInvestor(address, accreditationLevel)
    Registry->>Compliance: 8. éªŒè¯åˆè§„æ€§
    Compliance-->>Registry: 9. è¿”å›åˆè§„ç¡®è®¤
    Registry-->>Platform: 10. è¿”å›æ³¨å†ŒæˆåŠŸ
    Platform-->>Investor: 11. æ³¨å†ŒæˆåŠŸé€šçŸ¥
```

---

### 3.3 DSRegistry åˆçº¦è¯¦è§£

**èŒè´£**: æŠ•èµ„è€…æ³¨å†Œè¡¨,ç®¡ç†æŠ•èµ„è€…èº«ä»½å’Œèµ„æ ¼

**æ•°æ®ç»“æ„**:

```solidity
struct Investor {
    address wallet;
    uint8 accreditationLevel; // 0=æœªè®¤è¯, 1=åˆæ ¼æŠ•èµ„è€…, 2=æœºæ„æŠ•èµ„è€…
    uint16 country;
    uint256 registeredAt;
    bool verified;
}

// æŠ•èµ„è€…åœ°å€ => æŠ•èµ„è€…ä¿¡æ¯
mapping(address => Investor) public investors;

// å›½å®¶ä»£ç  => æŠ•èµ„è€…æ•°é‡
mapping(uint16 => uint256) public investorCountByCountry;
```

**æ ¸å¿ƒæ–¹æ³•**:

````solidity
/**
 * @dev æ·»åŠ æŠ•èµ„è€…
 * @param wallet æŠ•èµ„è€…é’±åŒ…åœ°å€
 * @param accreditationLevel è®¤è¯çº§åˆ«
 * @param country å›½å®¶ä»£ç 
 */
function addInvestor(
    address wallet,
    uint8 accreditationLevel,
    uint16 country
) external onlyAdmin {
    require(investors[wallet].wallet == address(0), "Already registered");
    require(accreditationLevel > 0, "Invalid accreditation level");

    // 1. æ·»åŠ æŠ•èµ„è€…
    investors[wallet] = Investor({
        wallet: wallet,
        accreditationLevel: accreditationLevel,
        country: country,
        registeredAt: block.timestamp,
        verified: true
    });

    // 2. æ›´æ–°ç»Ÿè®¡
    investorCountByCountry[country]++;

    // 3. è§¦å‘äº‹ä»¶
    emit InvestorAdded(wallet, accreditationLevel, country);
}
```

---

### 3.4 ä»£ç ç¤ºä¾‹

#### 3.4.1 æŠ•èµ„è€…æ³¨å†Œå®Œæ•´æµç¨‹(TypeScript)

```typescript
import { ethers } from "ethers";

/**
 * æŠ•èµ„è€…æ³¨å†Œå®Œæ•´æµç¨‹
 * @param registryContract DSRegistryåˆçº¦å®ä¾‹
 * @param investorData æŠ•èµ„è€…æ•°æ®
 * @returns æ³¨å†Œç»“æœ
 */
async function registerInvestor(
    registryContract: ethers.Contract,
    investorData: {
        wallet: string;
        email: string;
        fullName: string;
        country: number; // ISO 3166-1 numeric country code
        accreditationType: "individual" | "institutional";
        annualIncome?: bigint; // å¹´æ”¶å…¥(ä»…ä¸ªäººæŠ•èµ„è€…)
        netWorth?: bigint; // å‡€èµ„äº§(ä»…ä¸ªäººæŠ•èµ„è€…)
        aum?: bigint; // ç®¡ç†èµ„äº§è§„æ¨¡(ä»…æœºæ„æŠ•èµ„è€…)
    }
) {
    try {
        console.log("ğŸš€ å¼€å§‹æŠ•èµ„è€…æ³¨å†Œæµç¨‹...");
        console.log("æŠ•èµ„è€…é’±åŒ…:", investorData.wallet);
        console.log("æŠ•èµ„è€…å§“å:", investorData.fullName);
        console.log("å›½å®¶ä»£ç :", investorData.country);

        // 1. éªŒè¯æŠ•èµ„è€…èµ„æ ¼
        console.log("\næ­¥éª¤1: éªŒè¯æŠ•èµ„è€…èµ„æ ¼...");
        let accreditationLevel = 0;

        if (investorData.accreditationType === "individual") {
            // ä¸ªäººæŠ•èµ„è€…: å¹´æ”¶å…¥>$200K æˆ– å‡€èµ„äº§>$1M
            const minIncome = ethers.utils.parseEther("200000");
            const minNetWorth = ethers.utils.parseEther("1000000");

            if (
                (investorData.annualIncome && investorData.annualIncome.gte(minIncome)) ||
                (investorData.netWorth && investorData.netWorth.gte(minNetWorth))
            ) {
                accreditationLevel = 1; // åˆæ ¼ä¸ªäººæŠ•èµ„è€…
                console.log("âœ… ç¬¦åˆåˆæ ¼ä¸ªäººæŠ•èµ„è€…æ ‡å‡†");
            } else {
                throw new Error("ä¸ç¬¦åˆåˆæ ¼æŠ•èµ„è€…æ ‡å‡†");
            }
        } else if (investorData.accreditationType === "institutional") {
            // æœºæ„æŠ•èµ„è€…: AUM>$5M
            const minAUM = ethers.utils.parseEther("5000000");

            if (investorData.aum && investorData.aum.gte(minAUM)) {
                accreditationLevel = 2; // åˆæ ¼æœºæ„æŠ•èµ„è€…
                console.log("âœ… ç¬¦åˆåˆæ ¼æœºæ„æŠ•èµ„è€…æ ‡å‡†");
            } else {
                throw new Error("ä¸ç¬¦åˆåˆæ ¼æœºæ„æŠ•èµ„è€…æ ‡å‡†");
            }
        }

        // 2. æäº¤KYCç”³è¯·
        console.log("\næ­¥éª¤2: æäº¤KYCç”³è¯·...");
        // è¿™é‡Œåº”è¯¥è°ƒç”¨ç¬¬ä¸‰æ–¹KYCæœåŠ¡,æ­¤å¤„ç®€åŒ–å¤„ç†
        const kycResult = await submitKYC({
            wallet: investorData.wallet,
            email: investorData.email,
            fullName: investorData.fullName,
            country: investorData.country,
        });

        if (!kycResult.verified) {
            throw new Error("KYCéªŒè¯å¤±è´¥: " + kycResult.reason);
        }
        console.log("âœ… KYCéªŒè¯é€šè¿‡");

        // 3. æ·»åŠ æŠ•èµ„è€…åˆ°æ³¨å†Œè¡¨
        console.log("\næ­¥éª¤3: æ·»åŠ æŠ•èµ„è€…åˆ°æ³¨å†Œè¡¨...");
        const tx = await registryContract.addInvestor(
            investorData.wallet,
            accreditationLevel,
            investorData.country
        );

        console.log("äº¤æ˜“å“ˆå¸Œ:", tx.hash);
        const receipt = await tx.wait();
        console.log("âœ… æŠ•èµ„è€…æ³¨å†ŒæˆåŠŸ!");

        // 4. éªŒè¯æ³¨å†Œç»“æœ
        console.log("\næ­¥éª¤4: éªŒè¯æ³¨å†Œç»“æœ...");
        const investor = await registryContract.investors(investorData.wallet);
        const isVerified = await registryContract.isVerified(investorData.wallet);

        console.log("\nğŸ“Š æ³¨å†Œç»“æœ:");
        console.log("é’±åŒ…åœ°å€:", investor.wallet);
        console.log("è®¤è¯çº§åˆ«:", investor.accreditationLevel);
        console.log("å›½å®¶ä»£ç :", investor.country);
        console.log("æ³¨å†Œæ—¶é—´:", new Date(investor.registeredAt.toNumber() * 1000).toISOString());
        console.log("éªŒè¯çŠ¶æ€:", isVerified);

        return {
            wallet: investorData.wallet,
            accreditationLevel,
            country: investorData.country,
            verified: isVerified,
            registrationTime: new Date().toISOString(),
        };
    } catch (error) {
        console.error("âŒ æŠ•èµ„è€…æ³¨å†Œå¤±è´¥:", error);
        throw error;
    }
}

// KYCæäº¤å‡½æ•°(æ¨¡æ‹Ÿ)
async function submitKYC(data: any) {
    // å®é™…åº”ç”¨ä¸­åº”è°ƒç”¨ç¬¬ä¸‰æ–¹KYCæœåŠ¡API
    // ä¾‹å¦‚: Onfido, Jumio, Sumsubç­‰
    return {
        verified: true,
        reason: "",
    };
}

// ä½¿ç”¨ç¤ºä¾‹
async function main() {
    const provider = new ethers.providers.JsonRpcProvider("https://mainnet.infura.io/v3/YOUR_KEY");
    const wallet = new ethers.Wallet("YOUR_PRIVATE_KEY", provider);
    const registryContract = new ethers.Contract(REGISTRY_ADDRESS, DSRegistryABI, wallet);

    const result = await registerInvestor(registryContract, {
        wallet: "0x1234567890123456789012345678901234567890",
        email: "investor@example.com",
        fullName: "John Doe",
        country: 840, // ç¾å›½
        accreditationType: "individual",
        annualIncome: ethers.utils.parseEther("250000"), // å¹´æ”¶å…¥25ä¸‡ç¾å…ƒ
        netWorth: ethers.utils.parseEther("1500000"), // å‡€èµ„äº§150ä¸‡ç¾å…ƒ
    });

    console.log("\nğŸ‰ æŠ•èµ„è€…æ³¨å†Œå®Œæˆ!");
    console.log("è®¤è¯çº§åˆ«:", result.accreditationLevel);
}
```

---

## 4. ä¸šåŠ¡æµç¨‹ 3: ä»£å¸è´­ä¹°ä¸è½¬è´¦

### 4.1 æµç¨‹æ¦‚è¿°

ä»£å¸è´­ä¹°ä¸è½¬è´¦æ˜¯Securitizeçš„æ ¸å¿ƒä¸šåŠ¡æµç¨‹,æ‰€æœ‰äº¤æ˜“éƒ½éœ€è¦é€šè¿‡ä¸¥æ ¼çš„åˆè§„æ£€æŸ¥ã€‚

**æ¶‰åŠçš„åˆçº¦**: DSToken, DSCompliance, DSRegistry

**æ ¸å¿ƒæ­¥éª¤**:
1. æŠ•èµ„è€…æäº¤è´­ä¹°ç”³è¯·
2. åˆè§„æ£€æŸ¥(æŠ•èµ„è€…èµ„æ ¼ã€æŠ•èµ„é™é¢ã€é”å®šæœŸ)
3. æŠ•èµ„è€…æ”¯ä»˜èµ„é‡‘
4. é“¸é€ ä»£å¸åˆ°æŠ•èµ„è€…é’±åŒ…
5. æ›´æ–°è‚¡ä¸œåå†Œ

---

### 4.2 DSTokenåˆçº¦è¯¦è§£

**æ ¸å¿ƒæ–¹æ³•**:
```solidity
/**
 * @dev è½¬è´¦ä»£å¸(å¸¦åˆè§„æ£€æŸ¥)
 * @param to æ¥æ”¶è€…åœ°å€
 * @param amount è½¬è´¦é‡‘é¢
 */
function transfer(address to, uint256 amount) public override returns (bool) {
    // 1. åˆè§„æ£€æŸ¥
    require(compliance.canTransfer(msg.sender, to, amount), "Transfer not compliant");

    // 2. æŠ•èµ„è€…éªŒè¯
    require(registry.isVerified(msg.sender), "Sender not verified");
    require(registry.isVerified(to), "Receiver not verified");

    // 3. é”å®šæœŸæ£€æŸ¥
    require(!isLocked(msg.sender), "Tokens are locked");

    // 4. æ‰§è¡Œè½¬è´¦
    _transfer(msg.sender, to, amount);

    // 5. æ›´æ–°è‚¡ä¸œåå†Œ
    _updateShareholderRegistry(msg.sender, to, amount);

    return true;
}
````

---

## 5. ä¸šåŠ¡æµç¨‹ 4: åˆ†çº¢ä¸å…¬å¸è¡ŒåŠ¨

### 5.1 æµç¨‹æ¦‚è¿°

åˆ†çº¢ä¸å…¬å¸è¡ŒåŠ¨æ˜¯ Securitize çš„æ ¸å¿ƒæœåŠ¡,é€šè¿‡ DSService åˆçº¦å®ç°ã€‚

**æ¶‰åŠçš„åˆçº¦**: DSService, DSToken

**æ”¯æŒçš„å…¬å¸è¡ŒåŠ¨**:

-   ç°é‡‘åˆ†çº¢(Cash Dividend)
-   è‚¡ç¥¨åˆ†çº¢(Stock Dividend)
-   è‚¡ç¥¨æ‹†åˆ†(Stock Split)
-   è‚¡ç¥¨å›è´­(Buyback)

---

### 5.2 DSService åˆçº¦è¯¦è§£

**æ ¸å¿ƒæ–¹æ³•**:

```solidity
/**
 * @dev åˆ†å‘ç°é‡‘åˆ†çº¢
 * @param token ä»£å¸åœ°å€
 * @param totalAmount æ€»åˆ†çº¢é‡‘é¢
 */
function distributeDividend(
    address token,
    uint256 totalAmount
) external onlyIssuer {
    // 1. è·å–æ‰€æœ‰è‚¡ä¸œ
    address[] memory shareholders = DSToken(token).getShareholders();

    // 2. è®¡ç®—æ¯ä¸ªè‚¡ä¸œçš„åˆ†çº¢
    for (uint i = 0; i < shareholders.length; i++) {
        address shareholder = shareholders[i];
        uint256 balance = DSToken(token).balanceOf(shareholder);
        uint256 dividend = (totalAmount * balance) / DSToken(token).totalSupply();

        // 3. è½¬è´¦åˆ†çº¢
        payable(shareholder).transfer(dividend);

        // 4. è§¦å‘äº‹ä»¶
        emit DividendPaid(token, shareholder, dividend);
    }
}
```

---

## 6. ä¸šåŠ¡æµç¨‹ 5: äºŒçº§å¸‚åœºäº¤æ˜“

### 6.1 æµç¨‹æ¦‚è¿°

äºŒçº§å¸‚åœºäº¤æ˜“å…è®¸æŠ•èµ„è€…åœ¨é”å®šæœŸåäº¤æ˜“æ•°å­—è¯åˆ¸ã€‚

**æ ¸å¿ƒæ­¥éª¤**:

1. æŠ•èµ„è€…åœ¨ Securitize Markets æŒ‚å•
2. ä¹°å®¶æäº¤è´­ä¹°è®¢å•
3. åˆè§„æ£€æŸ¥(ä¹°å®¶èµ„æ ¼ã€å–å®¶é”å®šæœŸ)
4. æ‰§è¡Œäº¤æ˜“
5. æ›´æ–°è‚¡ä¸œåå†Œ

---

## 7. å®Œæ•´ä¸šåŠ¡æµç¨‹å›¾

```mermaid
graph TB
    Start[å¼€å§‹] --> Issue[1. è¯åˆ¸å‘è¡Œ]
    Issue --> KYC[2. æŠ•èµ„è€…KYC]
    KYC --> Purchase[3. ä»£å¸è´­ä¹°]
    Purchase --> Lockup[4. é”å®šæœŸ]
    Lockup --> Dividend[5. åˆ†çº¢]
    Dividend --> Trade[6. äºŒçº§å¸‚åœºäº¤æ˜“]
    Trade --> End[ç»“æŸ]

    style Issue fill:#4CAF50
    style KYC fill:#2196F3
    style Purchase fill:#FF9800
    style Trade fill:#9C27B0
```

---

## 8. DS Protocol è¯¦è§£

### 8.1 æ ¸å¿ƒç»„ä»¶

**DS Registry**:

-   æŠ•èµ„è€…æ³¨å†Œè¡¨
-   èº«ä»½éªŒè¯
-   èµ„æ ¼ç®¡ç†

**DS Token**:

-   ERC20 æ‰©å±•
-   è½¬è´¦æ§åˆ¶
-   é”å®šæœŸç®¡ç†

**DS Service**:

-   åˆ†çº¢æœåŠ¡
-   å…¬å¸è¡ŒåŠ¨
-   è‚¡ä¸œåå†Œ

**DS Compliance**:

-   SEC è§„åˆ™
-   è½¬è´¦é™åˆ¶
-   åˆè§„æŠ¥å‘Š

---

## 9. SEC åˆè§„æ¶æ„

### 9.1 Regulation D (Reg D)

**é€‚ç”¨åœºæ™¯**: ç§å‹Ÿå‘è¡Œ,ä»…é™åˆæ ¼æŠ•èµ„è€…

**åˆè§„è¦æ±‚**:

-   æŠ•èµ„è€…å¿…é¡»æ˜¯åˆæ ¼æŠ•èµ„è€…(Accredited Investor)
-   æœ€å¤š 35 åéåˆæ ¼æŠ•èµ„è€…
-   12 ä¸ªæœˆé”å®šæœŸ

**ä»£ç ç¤ºä¾‹**:

```solidity
function checkRegDCompliance(address investor) public view returns (bool) {
    // 1. æ£€æŸ¥æŠ•èµ„è€…èµ„æ ¼
    require(registry.getAccreditationLevel(investor) >= 1, "Not accredited");

    // 2. æ£€æŸ¥é”å®šæœŸ
    require(block.timestamp >= purchaseTime[investor] + 365 days, "Lockup period");

    return true;
}
```

---

### 9.2 Regulation S (Reg S)

**é€‚ç”¨åœºæ™¯**: æµ·å¤–å‘è¡Œ,éç¾å›½æŠ•èµ„è€…

**åˆè§„è¦æ±‚**:

-   æŠ•èµ„è€…å¿…é¡»æ˜¯éç¾å›½å±…æ°‘
-   6-12 ä¸ªæœˆé”å®šæœŸ
-   ç¦æ­¢å‘ç¾å›½æŠ•èµ„è€…è½¬å”®

---

### 9.3 Regulation A+ (Reg A+)

**é€‚ç”¨åœºæ™¯**: å°é¢å…¬å¼€å‘è¡Œ

**åˆè§„è¦æ±‚**:

-   Tier 1: æœ€å¤š$20M
-   Tier 2: æœ€å¤š$75M
-   éœ€è¦ SEC å®¡æ ¸

---

## 10. ç½‘ç»œä¿¡æ¯

### 10.1 æ”¯æŒçš„ç½‘ç»œ

-   **Ethereum Mainnet**: Chain ID 1
-   **Polygon**: Chain ID 137
-   **Algorand**: ç”¨äºæŸäº›ç‰¹å®šèµ„äº§

---

## 11. æ€»ç»“ä¸æœ€ä½³å®è·µ

### 11.1 æ ¸å¿ƒç‰¹ç‚¹

1. **æœºæ„çº§å¹³å°**: æœåŠ¡äºå¤§å‹èµ„äº§çš„ä»£å¸åŒ–
2. **å…¨é¢åˆè§„**: ç¬¦åˆ SEC Reg D/S/A+
3. **DS Protocol**: è‡ªç ”çš„æ•°å­—è¯åˆ¸åè®®
4. **è½¬è®©ä»£ç†æœåŠ¡**: å®Œæ•´çš„è‚¡ä¸œåå†Œç®¡ç†

### 11.2 å¼€å‘æœ€ä½³å®è·µ

1. **è¯åˆ¸å‘è¡Œ**: é€‰æ‹©åˆé€‚çš„ç›‘ç®¡ç±»å‹(Reg D/S/A+)
2. **æŠ•èµ„è€…ç®¡ç†**: ä¸¥æ ¼çš„ KYC å’Œåˆæ ¼æŠ•èµ„è€…è®¤è¯
3. **åˆè§„é…ç½®**: æ ¹æ®ç›‘ç®¡è¦æ±‚é…ç½®é”å®šæœŸå’Œè½¬è´¦é™åˆ¶
4. **å…¬å¸è¡ŒåŠ¨**: ä½¿ç”¨ DSService åˆçº¦å®ç°åˆ†çº¢ç­‰åŠŸèƒ½

### 11.3 å¸¸è§é—®é¢˜ FAQ

**Q: Securitize ä¸ Tokeny T-REX çš„åŒºåˆ«?**
A: Securitize ä¸“æ³¨äºç¾å›½å¸‚åœºå’Œ SEC åˆè§„,T-REX æ›´å›½é™…åŒ–ã€‚

**Q: å¦‚ä½•æˆä¸ºåˆæ ¼æŠ•èµ„è€…?**
A: éœ€è¦æ»¡è¶³ SEC çš„æ”¶å…¥æˆ–èµ„äº§è¦æ±‚,å¹¶é€šè¿‡ç¬¬ä¸‰æ–¹è®¤è¯ã€‚

**Q: é”å®šæœŸå¯ä»¥ç¼©çŸ­å—?**
A: å–å†³äºç›‘ç®¡ç±»å‹,Reg D é€šå¸¸éœ€è¦ 12 ä¸ªæœˆã€‚

---

## ğŸ“š å‚è€ƒèµ„æº

**å®˜æ–¹èµ„æº**:

-   **å®˜æ–¹ç½‘ç«™**: https://securitize.io/
-   **DS Protocol GitHub**: https://github.com/securitize-io/DSTokenInterfaces
-   **DS Protocol ç™½çš®ä¹¦**: https://s3.us-east-2.amazonaws.com/securitizemarkets.io/Securitize%E2%80%99s+Digital+Ownership+Architecture+for+Complete+Lifecycle+Management+of+Digital+Securities.pdf
-   **DS Protocol Medium æ–‡ç« **: https://medium.com/securitize/ds-protocol-the-trust-and-registry-services-91d1c4630f78

**ç›‘ç®¡èµ„æº**:

-   **SEC å®˜ç½‘**: https://www.sec.gov/
-   **Reg D è§„åˆ™**: https://www.sec.gov/education/smallbusiness/exemptofferings/rule504
-   **Reg S è§„åˆ™**: https://www.sec.gov/education/smallbusiness/exemptofferings/regs
-   **Reg A+ è§„åˆ™**: https://www.sec.gov/education/smallbusiness/exemptofferings/rega

---

**æ–‡æ¡£ç»“æŸ**
